<html class="no-js">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" type="text/css" href="css/squares-load.css">



</head>

<body>
<button onclick="curtian()">Start</button>
<div class="loader-mask">
	<div class="loader-wrap">
		<div class="square square-tl_closed"></div>
		<div class="square square-tr_closed"></div>
		<div class="square square-bl_closed"></div>
		<div class="square square-br_closed"></div>
	</div>
	<button onclick="done = true" class="end-btn">End</button>
</div> <!-- loader-mask end -->
<!-- <button onclick="loading()" class="ignition">start</button> -->
<script src="js/jquery-1.12.3.min.js"></script>

<script>

	var done = false;

	function curtian() {
		$(document.getElementsByClassName ('loader-mask')).addClass('down');
		var timerOne = setTimeout(split, 900);
	};

	function split() {
		var tl = document.getElementsByClassName ('square-tl_closed');
		var tr = document.getElementsByClassName ('square-tr_closed');
		var br = document.getElementsByClassName ('square-br_closed');
		var bl = document.getElementsByClassName ('square-bl_closed');

			$(tl).addClass('square-tl_open');
			$(tl).removeClass('square-tl_closed');

			$(tr).addClass('square-tr_open');
			$(tr).removeClass('square-tr_closed');

			$(br).addClass('square-br_open');
			$(br).removeClass('square-br_closed');

			$(bl).addClass('square-bl_open');
			$(bl).removeClass('square-bl_closed');

			var timerTwo = setTimeout(loading, 900);

	};

	function loading() {
		var tl = document.getElementsByClassName ('square-tl_open');
		var tr = document.getElementsByClassName ('square-tr_open');
		var br = document.getElementsByClassName ('square-br_open');
		var bl = document.getElementsByClassName ('square-bl_open');

		var grabone = document.getElementsByClassName ('grabone');
		var grabtwo = document.getElementsByClassName ('grabtwo');
		var grabthree = document.getElementsByClassName ('grabthree');
		var grabfour = document.getElementsByClassName ('grabfour');

		grab();

		function grab() {
			$(tl).addClass('grabone');
			$(tr).addClass('grabtwo');
			$(br).addClass('grabthree');
			$(bl).addClass('grabfour');

			move();
		};
		
 		function move() {
 			$(grabone).addClass('square-tr_open' );
 			$(grabone).removeClass('square-tl_open');

 			$(grabtwo).addClass('square-br_open' );
 			$(grabtwo).removeClass('square-tr_open');

 			$(grabthree).addClass('square-bl_open' );
 			$(grabthree).removeClass('square-br_open');

 			$(grabfour).addClass('square-tl_open' );
 			$(grabfour).removeClass('square-bl_open');

 			drop();	
		};

		function drop() {
			$(grabone).removeClass('grabone');
			$(grabtwo).removeClass('grabtwo');
			$(grabthree).removeClass('grabthree');
			$(grabfour).removeClass('grabfour');
			if (done) {
				console.log("done!");
				var timerThree = setTimeout(endLoading, 1000);
			}
			else {
				var timerFour = setTimeout(loading, 1000);
			}
		};	

	};
	function endLoading() {
		var tl = document.getElementsByClassName ('square-tl_open');
		var tr = document.getElementsByClassName ('square-tr_open');
		var br = document.getElementsByClassName ('square-br_open');
		var bl = document.getElementsByClassName ('square-bl_open');

			$(tl).addClass('square-tl_closed');
			$(tl).removeClass('square-tl_open');

			$(tr).addClass('square-tr_closed');
			$(tr).removeClass('square-tr_open');

			$(br).addClass('square-br_closed');
			$(br).removeClass('square-br_open');

			$(bl).addClass('square-bl_closed');
			$(bl).removeClass('square-bl_open');

			var timerFive = setTimeout(fill, 750);
	};

	function fill() {
		$(document.getElementsByClassName ('loader-wrap')).addClass('fill')
		var timerSix = setTimeout(fade, 300);
	};

	function fade() {
		$(document.getElementsByClassName ('loader-mask')).addClass('fade')
		var timerSeven = setTimeout(scrub, 3000);
	};

	function scrub() {
		$(document.getElementsByClassName ('loader-mask')).removeClass('down fade')
		$(document.getElementsByClassName ('loader-wrap')).removeClass('fill')
		done = false
	};

</script>
</body>



</html>